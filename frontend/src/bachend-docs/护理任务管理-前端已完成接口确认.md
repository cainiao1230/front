# æŠ¤ç†ä»»åŠ¡ç®¡ç† - å‰ç«¯å·²å®Œæˆæ¥å£ç¡®è®¤æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£è¯´æ˜
æœ¬æ–‡æ¡£åŸºäºåç«¯æä¾›çš„å®é™…å­—æ®µè¯´æ˜ï¼Œå‰ç«¯å·²å®Œæˆæ‰€æœ‰ä»£ç è°ƒæ•´ã€‚è¯·åç«¯ç¡®è®¤æ¥å£æ˜¯å¦æ­£å¸¸å¯ç”¨ã€‚

**æ›´æ–°æ—¶é—´**: 2026-01-20  
**å‰ç«¯ç‰ˆæœ¬**: v1.1 (å·²å®Œæˆæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤åŠŸèƒ½)

---

## âœ… å‰ç«¯å·²å®Œæˆçš„è°ƒæ•´

### å­—æ®µæ˜ å°„è°ƒæ•´
| å‰ç«¯åŸå§‹éœ€æ±‚ | åç«¯å®é™…å­—æ®µ | å‰ç«¯å¤„ç†æ–¹å¼ | çŠ¶æ€ |
|-------------|-------------|-------------|------|
| task_type | title | ä½¿ç”¨ä¸‹æ‹‰é€‰æ‹©å¡«å…¥title | âœ… å·²è°ƒæ•´ |
| task_content | description | ç›´æ¥æ˜ å°„ä¸ºdescription | âœ… å·²è°ƒæ•´ |
| caregiver_name | assigned_to_name | æ˜¾ç¤ºæ—¶ä½¿ç”¨assigned_to_name | âœ… å·²è°ƒæ•´ |
| priorityç­›é€‰ | åç«¯ä¸æ”¯æŒ | ç§»é™¤æœç´¢æ¡ä»¶ä¸­çš„priority | âœ… å·²è°ƒæ•´ |

### åŠŸèƒ½è°ƒæ•´
- âœ… æ–°å¢ä»»åŠ¡è¡¨å•ï¼šä½¿ç”¨ `title` å’Œ `description` å­—æ®µ
- âœ… ç¼–è¾‘ä»»åŠ¡åŠŸèƒ½ï¼šå¤ç”¨æ–°å¢å¯¹è¯æ¡†ï¼Œè°ƒç”¨ PUT æ¥å£
- âœ… åˆ é™¤ä»»åŠ¡åŠŸèƒ½ï¼šå•ä¸ªåˆ é™¤å’Œæ‰¹é‡åˆ é™¤
- âœ… ä»»åŠ¡åˆ—è¡¨ï¼šæ˜¾ç¤º `assigned_to_name` å­—æ®µ
- âœ… æœç´¢æ¡ä»¶ï¼šç§»é™¤ä¼˜å…ˆçº§ç­›é€‰ï¼ˆåç«¯ä¸æ”¯æŒï¼‰
- âœ… ä»Šæ—¥ä»»åŠ¡ï¼šä½¿ç”¨åç«¯å®é™…å­—æ®µ `elderly_name`, `assigned_to_name`, `scheduled_time`

---

## ğŸ”¥ å‰ç«¯å·²å®Œæˆçš„åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è°ƒç”¨æ¥å£ | è¯´æ˜ |
|------|------|----------|------|
| ä»»åŠ¡åˆ—è¡¨ | âœ… å®Œæˆ | GET /api/care/tasks | åˆ†é¡µã€ç­›é€‰ |
| æ–°å¢ä»»åŠ¡ | âœ… å®Œæˆ | POST /api/care/tasks | è¡¨å•éªŒè¯ |
| ç¼–è¾‘ä»»åŠ¡ | âœ… å®Œæˆ | PUT /api/care/tasks/{id} | å›å¡«æ•°æ® |
| åˆ é™¤ä»»åŠ¡ | âœ… å®Œæˆ | DELETE /api/care/tasks/{id} | ç¡®è®¤æç¤º |
| æ‰¹é‡åˆ é™¤ | âœ… å®Œæˆ | DELETE /api/care/tasks/{id} (å¾ªç¯) | å¤šé€‰åˆ é™¤ |
| å¼€å§‹ä»»åŠ¡ | âœ… å®Œæˆ | PATCH /api/care/tasks/{id}/status | çŠ¶æ€æ”¹ä¸ºin_progress |
| å®Œæˆä»»åŠ¡ | âœ… å®Œæˆ | PATCH /api/care/tasks/{id}/status | çŠ¶æ€æ”¹ä¸ºcompleted |
| æ‰¹é‡å¼€å§‹ | âœ… å®Œæˆ | PATCH /api/care/tasks/{id}/status (å¾ªç¯) | å¤šé€‰å¼€å§‹ |
| æ‰¹é‡å®Œæˆ | âœ… å®Œæˆ | PATCH /api/care/tasks/{id}/status (å¾ªç¯) | å¤šé€‰å®Œæˆ |

---

## ğŸ”Œ æ¥å£è°ƒç”¨è¯¦æƒ…

### 1. åˆ›å»ºä»»åŠ¡ â­â­â­ ã€æœ€é‡è¦ã€‘
```
POST /api/care/tasks
```

**å‰ç«¯å‘é€æ•°æ®ï¼š**
```json
{
  "elderly_id": 1,
  "title": "ååŠ©åˆé¤",
  "description": "ååŠ©è€äººè¿›é£Ÿï¼Œæ³¨æ„å’€åš¼èƒ½åŠ›",
  "priority": "high",
  "assigned_to": 5,
  "scheduled_time": "2026-01-20 12:00:00"
}
```

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "id": 11,
    "elderly_id": 1,
    "elderly_name": "æçˆ·çˆ·",
    "title": "ååŠ©åˆé¤",
    "description": "ååŠ©è€äººè¿›é£Ÿï¼Œæ³¨æ„å’€åš¼èƒ½åŠ›",
    "priority": "high",
    "status": "pending",
    "assigned_to": 5,
    "assigned_to_name": "å¼ æŠ¤å·¥",
    "scheduled_time": "2026-01-20T12:00:00",
    "completed_at": null,
    "created_at": "2026-01-20T10:30:00",
    "updated_at": "2026-01-20T10:30:00"
  }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** æŠ¤ç†ä»»åŠ¡ç®¡ç†é¡µé¢ â†’ ç‚¹å‡»"æ–°å¢ä»»åŠ¡" â†’ å¡«å†™è¡¨å• â†’ æäº¤

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/care/CareTasks.vue` - `saveTask()` æ–¹æ³•

---

### 2. è·å–ä»»åŠ¡åˆ—è¡¨ â­â­â­
```
GET /api/care/tasks
```

**æŸ¥è¯¢å‚æ•°ï¼ˆå‰ç«¯å‘é€ï¼‰ï¼š**
- `elderly_id`: è€äººIDï¼ˆå¯é€‰ï¼‰
- `status`: ä»»åŠ¡çŠ¶æ€ï¼ˆå¯é€‰ï¼‰- pending/in_progress/completed/cancelled
- `assigned_to`: æŠ¤å·¥IDï¼ˆå¯é€‰ï¼‰
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `page_size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰

âš ï¸ **æ³¨æ„ï¼šå‰ç«¯ä¸å†å‘é€ `priority` å‚æ•°**

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "items": [
      {
        "id": 1,
        "elderly_id": 1,
        "elderly_name": "æçˆ·çˆ·",
        "title": "ååŠ©åˆé¤",
        "description": "ååŠ©è€äººè¿›é£Ÿ",
        "priority": "high",
        "status": "pending",
        "assigned_to": 5,
        "assigned_to_name": "å¼ æŠ¤å·¥",
        "scheduled_time": "2026-01-20T12:00:00",
        "completed_at": null,
        "created_at": "2026-01-20T10:00:00",
        "updated_at": "2026-01-20T10:00:00"
      }
    ],
    "total": 10,
    "page": 1,
    "page_size": 10
  }
}
```

**å‰ç«¯æ˜¾ç¤ºå­—æ®µï¼š**
- ä»»åŠ¡ID: `id`
- è€äºº: `elderly_name`
- ä»»åŠ¡æ ‡é¢˜: `title`
- ä»»åŠ¡å†…å®¹: `description`
- ä¼˜å…ˆçº§: `priority` (high/medium/low)
- çŠ¶æ€: `status` (pending/in_progress/completed/cancelled)
- åˆ†é…ç»™: `assigned_to_name`
- è®¡åˆ’æ—¶é—´: `scheduled_time`

**ä½¿ç”¨åœºæ™¯ï¼š** æŠ¤ç†ä»»åŠ¡ç®¡ç†é¡µé¢åŠ è½½ã€æœç´¢ã€ç¿»é¡µ

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/care/CareTasks.vue` - `loadData()` æ–¹æ³•

---

### 3. ä»Šæ—¥ä»»åŠ¡ â­â­â­ ã€é¦–é¡µä½¿ç”¨ã€‘
```
GET /api/care/tasks/today
```

**è¯´æ˜ï¼š** è¿”å›å½“å‰ç™»å½•ç”¨æˆ·ä»Šå¤©çš„æ‰€æœ‰ä»»åŠ¡

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "items": [
      {
        "id": 1,
        "elderly_id": 1,
        "elderly_name": "æçˆ·çˆ·",
        "title": "ååŠ©åˆé¤",
        "description": "ååŠ©è€äººè¿›é£Ÿ",
        "priority": "high",
        "status": "pending",
        "assigned_to": 5,
        "assigned_to_name": "å¼ æŠ¤å·¥",
        "scheduled_time": "2026-01-20T12:00:00"
      }
    ],
    "total": 5
  }
}
```

æˆ–è€…ç®€åŒ–æ ¼å¼ï¼ˆå‰ç«¯å·²å…¼å®¹ï¼‰ï¼š
```json
{
  "code": 0,
  "message": "ok",
  "data": [
    {
      "id": 1,
      "elderly_name": "æçˆ·çˆ·",
      "title": "ååŠ©åˆé¤",
      "assigned_to_name": "å¼ æŠ¤å·¥",
      "scheduled_time": "2026-01-20T12:00:00",
      "status": "pending"
    }
  ]
}
```

**å‰ç«¯ä½¿ç”¨å­—æ®µï¼š**
- `elderly_name` - è€äººå§“å
- `title` - ä»»åŠ¡ç±»å‹/æ ‡é¢˜
- `scheduled_time` - æ‰§è¡Œæ—¶é—´ï¼ˆå‰ç«¯æ ¼å¼åŒ–ä¸ºHH:mmï¼‰
- `assigned_to_name` - è´£ä»»äºº
- `status` - ä»»åŠ¡çŠ¶æ€

**ä½¿ç”¨åœºæ™¯ï¼š** é¦–é¡µ"ä»Šæ—¥æŠ¤ç†å®‰æ’"æ¨¡å—

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/dashboard/HomeView.vue` - `loadTasks()` æ–¹æ³•

---

### 4. æ›´æ–°ä»»åŠ¡çŠ¶æ€ â­â­â­
```
PATCH /api/care/tasks/{id}/status
```

**å‰ç«¯å‘é€æ•°æ®ï¼š**
```json
{
  "status": "in_progress"
}
```

**çŠ¶æ€å€¼ï¼š**
- `pending` - å¾…å¤„ç†
- `in_progress` - è¿›è¡Œä¸­
- `completed` - å·²å®Œæˆ
- `cancelled` - å·²å–æ¶ˆ

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "id": 1,
    "status": "completed",
    "completed_at": "2026-01-20T13:00:00"
  }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** 
- ç‚¹å‡»"å¼€å§‹"æŒ‰é’® â†’ çŠ¶æ€æ”¹ä¸º in_progress
- ç‚¹å‡»"å®Œæˆ"æŒ‰é’® â†’ çŠ¶æ€æ”¹ä¸º completed
- æ‰¹é‡å¼€å§‹/å®Œæˆæ“ä½œ

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/care/CareTasks.vue` - `startTask()`, `completeTask()`, `batchStart()`, `batchComplete()` æ–¹æ³•

---

### 5. åˆ é™¤ä»»åŠ¡ â­â­
```
DELETE /api/care/tasks/{id}
```

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": null
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** ç‚¹å‡»"åˆ é™¤"æŒ‰é’®ã€æ‰¹é‡åˆ é™¤

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/care/CareTasks.vue` - `deleteTask()`, `batchDelete()` æ–¹æ³•

---

### 6. è·å–ä»»åŠ¡è¯¦æƒ… â­
```
GET /api/care/tasks/{id}
```

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "id": 1,
    "elderly_id": 1,
    "elderly_name": "æçˆ·çˆ·",
    "title": "ååŠ©åˆé¤",
    "description": "ååŠ©è€äººè¿›é£Ÿï¼Œæ³¨æ„å’€åš¼èƒ½åŠ›",
    "priority": "high",
    "status": "pending",
    "assigned_to": 5,
    "assigned_to_name": "å¼ æŠ¤å·¥",
    "scheduled_time": "2026-01-20T12:00:00",
    "completed_at": null,
    "created_at": "2026-01-20T10:00:00",
    "updated_at": "2026-01-20T10:00:00"
  }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

---

### 7. æ›´æ–°ä»»åŠ¡ â­
```
PUT /api/care/tasks/{id}
```

**å‰ç«¯å‘é€æ•°æ®ï¼ˆæ‰€æœ‰å­—æ®µå¯é€‰ï¼‰ï¼š**
```json
{
  "elderly_id": 1,
  "title": "ååŠ©æ™šé¤",
  "description": "ååŠ©è€äººæ™šé¤è¿›é£Ÿ",
  "priority": "medium",
  "assigned_to": 6,
  "scheduled_time": "2026-01-20T18:00:00"
}
```

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "id": 1,
    "elderly_id": 1,
    "title": "ååŠ©æ™šé¤",
    "description": "ååŠ©è€äººæ™šé¤è¿›é£Ÿ",
    "priority": "medium",
    "assigned_to": 6,
    "scheduled_time": "2026-01-20T18:00:00",
    "updated_at": "2026-01-20T11:00:00"
  }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** ç¼–è¾‘ä»»åŠ¡ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

---

## ğŸ“Š å‰ç«¯ä»»åŠ¡ç±»å‹é€‰é¡¹

è™½ç„¶åç«¯ä½¿ç”¨ `title` å­—æ®µè‡ªç”±è¾“å…¥ï¼Œä½†å‰ç«¯æä¾›äº†é¢„è®¾é€‰é¡¹ï¼ˆå¯è‡ªå®šä¹‰è¾“å…¥ï¼‰ï¼š

```javascript
const TASK_TYPE_OPTIONS = [
  { label: 'ååŠ©è¿›é¤', value: 'feeding' },
  { label: 'ååŠ©æ´—æ¾¡', value: 'bathing' },
  { label: 'ç¿»èº«æŠ¤ç†', value: 'turning' },
  { label: 'é™ªä¼´èŠå¤©', value: 'companionship' },
  { label: 'åº·å¤è®­ç»ƒ', value: 'rehabilitation' },
  { label: 'å¥åº·æ£€æŸ¥', value: 'health_check' },
  { label: 'å…¶ä»–', value: 'other' }
]
```

**å‰ç«¯å¤„ç†ï¼š** ç”¨æˆ·é€‰æ‹©åï¼Œç›´æ¥å°† **label** å€¼ï¼ˆå¦‚"ååŠ©è¿›é¤"ï¼‰å­˜å…¥ `title` å­—æ®µ

---

## ğŸ”§ è¾…åŠ©æ¥å£éœ€æ±‚

### è·å–æŠ¤å·¥åˆ—è¡¨
```
GET /api/system/users?role=caregiver
```

**æœŸæœ›å“åº”ï¼š**
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "items": [
      {
        "id": 5,
        "name": "å¼ æŠ¤å·¥",
        "username": "zhangsan",
        "role": "caregiver",
        "status": "active"
      },
      {
        "id": 6,
        "name": "ææŠ¤å·¥",
        "username": "lisi",
        "role": "caregiver",
        "status": "active"
      }
    ]
  }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š** æ–°å¢/ç¼–è¾‘ä»»åŠ¡æ—¶ï¼Œé€‰æ‹©åˆ†é…æŠ¤å·¥ä¸‹æ‹‰æ¡†

**å‰ç«¯ä»£ç ä½ç½®ï¼š** `src/views/care/CareTasks.vue` - `loadCaregivers()` æ–¹æ³•ï¼ˆå¾…å®ç°ï¼‰

âš ï¸ **æ³¨æ„ï¼š** ç›®å‰å‰ç«¯ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œè¯·ç¡®è®¤æ­¤æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®

---

## âœ… æµ‹è¯•æ¸…å•

### åœºæ™¯1ï¼šåˆ›å»ºæ–°ä»»åŠ¡ â­â­â­
1. æ‰“å¼€æŠ¤ç†ä»»åŠ¡ç®¡ç†é¡µé¢ï¼ˆ`/care/tasks`ï¼‰
2. ç‚¹å‡»å³ä¸Šè§’"æ–°å¢ä»»åŠ¡"æŒ‰é’®
3. å¡«å†™è¡¨å•ï¼š
   - é€‰æ‹©è€äººï¼šæçˆ·çˆ·
   - ä»»åŠ¡æ ‡é¢˜ï¼šé€‰æ‹©"ååŠ©è¿›é¤"æˆ–è‡ªå®šä¹‰è¾“å…¥
   - ä»»åŠ¡æè¿°ï¼šè¾“å…¥è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰
   - ä¼˜å…ˆçº§ï¼šé€‰æ‹©"é«˜"
   - åˆ†é…æŠ¤å·¥ï¼šé€‰æ‹©æŠ¤å·¥
   - è®¡åˆ’æ—¶é—´ï¼šé€‰æ‹©æ—¥æœŸæ—¶é—´
4. ç‚¹å‡»"ç¡®å®š"æŒ‰é’®
5. **é¢„æœŸç»“æœï¼š**
   - æç¤º"ä»»åŠ¡åˆ›å»ºæˆåŠŸ"
   - å¯¹è¯æ¡†å…³é—­
   - åˆ—è¡¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæ–°ä»»åŠ¡
   - æ–°ä»»åŠ¡åŒ…å«ï¼šä»»åŠ¡IDã€è€äººå§“åã€æ ‡é¢˜ã€æè¿°ã€ä¼˜å…ˆçº§ã€çŠ¶æ€(pending)ã€åˆ†é…ç»™çš„æŠ¤å·¥åã€è®¡åˆ’æ—¶é—´

### åœºæ™¯2ï¼šæŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨ â­â­â­
1. æ‰“å¼€æŠ¤ç†ä»»åŠ¡ç®¡ç†é¡µé¢
2. **é¢„æœŸç»“æœï¼š**
   - æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨
   - æ¯è¡ŒåŒ…å«ï¼šIDã€è€äººã€æ ‡é¢˜ã€å†…å®¹ã€ä¼˜å…ˆçº§æ ‡ç­¾ã€çŠ¶æ€æ ‡ç­¾ã€æŠ¤å·¥åã€è®¡åˆ’æ—¶é—´ã€æ“ä½œæŒ‰é’®
   - åˆ†é¡µæ­£å¸¸å·¥ä½œ
3. æµ‹è¯•æœç´¢ï¼š
   - é€‰æ‹©è€äººï¼šæçˆ·çˆ· â†’ ç‚¹å‡»"æŸ¥è¯¢"
   - é€‰æ‹©çŠ¶æ€ï¼šå¾…å¤„ç† â†’ ç‚¹å‡»"æŸ¥è¯¢"
   - é€‰æ‹©æŠ¤å·¥ï¼šå¼ æŠ¤å·¥ â†’ ç‚¹å‡»"æŸ¥è¯¢"
4. **é¢„æœŸç»“æœï¼š** åˆ—è¡¨æŒ‰æ¡ä»¶è¿‡æ»¤æ˜¾ç¤º

### åœºæ™¯3ï¼šå¼€å§‹ä»»åŠ¡ â­â­â­
1. æ‰¾åˆ°çŠ¶æ€ä¸º"å¾…å¤„ç†"çš„ä»»åŠ¡
2. ç‚¹å‡»"å¼€å§‹"æŒ‰é’®
3. **é¢„æœŸç»“æœï¼š**
   - æç¤º"ä»»åŠ¡å·²å¼€å§‹"
   - çŠ¶æ€å˜ä¸º"è¿›è¡Œä¸­"
   - "å¼€å§‹"æŒ‰é’®å˜ä¸º"å®Œæˆ"æŒ‰é’®

### åœºæ™¯4ï¼šå®Œæˆä»»åŠ¡ â­â­â­
1. æ‰¾åˆ°çŠ¶æ€ä¸º"è¿›è¡Œä¸­"çš„ä»»åŠ¡
2. ç‚¹å‡»"å®Œæˆ"æŒ‰é’®
3. **é¢„æœŸç»“æœï¼š**
   - æç¤º"ä»»åŠ¡å·²å®Œæˆ"
   - çŠ¶æ€å˜ä¸º"å·²å®Œæˆ"
   - è®°å½•å®Œæˆæ—¶é—´ `completed_at`
   - æ“ä½œæŒ‰é’®åªå‰©"ç¼–è¾‘"å’Œ"åˆ é™¤"

### åœºæ™¯5ï¼šæ‰¹é‡æ“ä½œ â­â­
1. å‹¾é€‰å¤šä¸ª"å¾…å¤„ç†"ä»»åŠ¡
2. ç‚¹å‡»"æ‰¹é‡å¼€å§‹"
3. **é¢„æœŸç»“æœï¼š** æ‰€æœ‰é€‰ä¸­ä»»åŠ¡çŠ¶æ€å˜ä¸º"è¿›è¡Œä¸­"
4. å‹¾é€‰å¤šä¸ª"è¿›è¡Œä¸­"ä»»åŠ¡
5. ç‚¹å‡»"æ‰¹é‡å®Œæˆ"
6. **é¢„æœŸç»“æœï¼š** æ‰€æœ‰é€‰ä¸­ä»»åŠ¡çŠ¶æ€å˜ä¸º"å·²å®Œæˆ"

### åœºæ™¯6ï¼šåˆ é™¤ä»»åŠ¡ â­â­
1. ç‚¹å‡»æŸä¸ªä»»åŠ¡çš„"åˆ é™¤"æŒ‰é’®
2. ç¡®è®¤åˆ é™¤
3. **é¢„æœŸç»“æœï¼š**
   - æç¤º"ä»»åŠ¡å·²åˆ é™¤"
   - ä»»åŠ¡ä»åˆ—è¡¨ä¸­ç§»é™¤
   - åˆ—è¡¨è‡ªåŠ¨åˆ·æ–°

### åœºæ™¯7ï¼šé¦–é¡µä»Šæ—¥ä»»åŠ¡ â­â­â­
1. æ‰“å¼€é¦–é¡µï¼ˆ`/`ï¼‰
2. æŸ¥çœ‹"ä»Šæ—¥æŠ¤ç†å®‰æ’"æ¨¡å—
3. **é¢„æœŸç»“æœï¼š**
   - æ˜¾ç¤ºä»Šå¤©çš„ä»»åŠ¡åˆ—è¡¨
   - æ¯è¡ŒåŒ…å«ï¼šè€äººä¿¡æ¯ã€ä»»åŠ¡ç±»å‹ã€æ‰§è¡Œæ—¶é—´ã€è´£ä»»äººã€çŠ¶æ€
   - å¯ä»¥æŒ‰çŠ¶æ€ç­›é€‰ï¼šå…¨éƒ¨/æœªå¼€å§‹/è¿›è¡Œä¸­/å·²å®Œæˆ
   - æ—¶é—´æ ¼å¼ä¸º HH:mm (å¦‚ "12:00")

---

## ğŸš¨ é‡è¦æé†’

### 1. å­—æ®µåç§°ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰
- âœ… ä½¿ç”¨ `title` è€Œä¸æ˜¯ `task_type`
- âœ… ä½¿ç”¨ `description` è€Œä¸æ˜¯ `task_content`
- âœ… ä½¿ç”¨ `assigned_to_name` è€Œä¸æ˜¯ `caregiver_name`
- âœ… æ—¶é—´æ ¼å¼ä¸º ISO8601: `2026-01-20T12:00:00`

### 2. å“åº”æ ¼å¼
```json
{
  "code": 0,           // æˆåŠŸä¸º0ï¼Œå¤±è´¥ä¸ºå…¶ä»–å€¼
  "message": "ok",     // æç¤ºä¿¡æ¯
  "data": {...}        // æ•°æ®å¯¹è±¡æˆ–æ•°ç»„
}
```

### 3. çŠ¶æ€æµè½¬è§„åˆ™
- `pending` â†’ `in_progress` âœ…
- `pending` â†’ `cancelled` âœ…
- `in_progress` â†’ `completed` âœ…
- `in_progress` â†’ `cancelled` âœ…
- `completed` / `cancelled` â†’ ä¸å¯å†æ”¹å˜ âŒ

### 4. æƒé™æ§åˆ¶
- **admin/nurse**: å¯ä»¥æŸ¥çœ‹å’Œæ“ä½œæ‰€æœ‰ä»»åŠ¡
- **caregiver**: åªèƒ½æŸ¥çœ‹åˆ†é…ç»™è‡ªå·±çš„ä»»åŠ¡ (`assigned_to` ç­‰äºå½“å‰ç”¨æˆ·ID)

### 5. æ•°æ®éªŒè¯
- `elderly_id`: å¿…å¡«ï¼Œå¿…é¡»å­˜åœ¨
- `title`: å¿…å¡«
- `description`: å¯é€‰
- `priority`: å¿…å¡«ï¼Œåªèƒ½æ˜¯ low/medium/high
- `assigned_to`: å¿…å¡«ï¼Œå¿…é¡»æ˜¯æœ‰æ•ˆçš„æŠ¤å·¥ç”¨æˆ·ID
- `scheduled_time`: å¿…å¡«ï¼Œæ ¼å¼ä¸º ISO8601

---

## ğŸ“ åç«¯å¼€å‘å»ºè®®

### æ•°æ®åº“è¡¨ç»“æ„ï¼ˆä¾›å‚è€ƒï¼‰
```sql
CREATE TABLE care_tasks (
    id INT PRIMARY KEY AUTO_INCREMENT,
    elderly_id INT NOT NULL COMMENT 'è€äººID',
    title VARCHAR(200) NOT NULL COMMENT 'ä»»åŠ¡æ ‡é¢˜',
    description TEXT NULL COMMENT 'ä»»åŠ¡æè¿°',
    priority VARCHAR(20) NOT NULL DEFAULT 'medium' COMMENT 'ä¼˜å…ˆçº§: low/medium/high',
    status VARCHAR(20) NOT NULL DEFAULT 'pending' COMMENT 'çŠ¶æ€: pending/in_progress/completed/cancelled',
    assigned_to INT NOT NULL COMMENT 'åˆ†é…ç»™çš„æŠ¤å·¥ID',
    scheduled_time DATETIME NOT NULL COMMENT 'è®¡åˆ’æ‰§è¡Œæ—¶é—´',
    completed_at DATETIME NULL COMMENT 'å®Œæˆæ—¶é—´',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_elderly_id (elderly_id),
    INDEX idx_assigned_to (assigned_to),
    INDEX idx_status (status),
    INDEX idx_scheduled_time (scheduled_time),
    FOREIGN KEY (elderly_id) REFERENCES elderly(id) ON DELETE CASCADE,
    FOREIGN KEY (assigned_to) REFERENCES users(id) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æŠ¤ç†ä»»åŠ¡è¡¨';
```

### å…³è”æŸ¥è¯¢å»ºè®®
æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨æ—¶ï¼Œå»ºè®®ä½¿ç”¨ JOIN æŸ¥è¯¢å…³è”è€äººå’ŒæŠ¤å·¥ä¿¡æ¯ï¼š
```sql
SELECT 
    t.id,
    t.elderly_id,
    e.name as elderly_name,
    t.title,
    t.description,
    t.priority,
    t.status,
    t.assigned_to,
    u.name as assigned_to_name,
    t.scheduled_time,
    t.completed_at,
    t.created_at,
    t.updated_at
FROM care_tasks t
LEFT JOIN elderly e ON t.elderly_id = e.id
LEFT JOIN users u ON t.assigned_to = u.id
WHERE ...
```

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®æˆ–æ¥å£è°ƒæ•´ï¼Œè¯·è”ç³»å‰ç«¯å¼€å‘å›¢é˜Ÿã€‚

**å‰ç«¯å¼€å‘å®Œæˆæ—¶é—´**: 2026-01-20  
**ç­‰å¾…åç«¯ç¡®è®¤**
